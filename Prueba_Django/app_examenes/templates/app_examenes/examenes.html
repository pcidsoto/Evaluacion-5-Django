{% extends 'base_examenes.html' %}
{% load static %}

{% block titulo %}Examenes{% endblock %}

{% block navbar %} {{block.super}} {% endblock%}
{% block sidebar %} {{block.super }} {% endblock%}


{% block encabezado-principal %}
    <!-- Aqui va tu codigo -->
    <div class="card">
        <form method = "POST"> 
            {% csrf_token %}
            {{ seleccionar }} 
            <input type = "submit" value = "Ver" class="btn btn-primary btn-sm"> 
        </form> 
        <h3 class="card-header"> Pacientes:{{hemograma.0.id_usuario_id}}</h3>
        <div class="card-body">
        </div>
        <div id="agregar_examenes">
            <div class="row" style="padding-bottom: 1em;">
                <div class="col-md-3">
                    {% if hemograma %}
                    <a href="{% url 'app_examenes:add_hemo' pk=hemograma.0.id_usuario_id %}" type="submit" class="btn btn-primary btn-sm">Agregar Hemograma</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block graficos %}
    <nav>
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
            <a class="nav-item nav-link active" id="nav-hemograma-tab" data-toggle="tab" href="#nav-hemograma" role="tab" aria-controls="nav-hemograma" aria-selected="true">Hemograma</a>
            <a class="nav-item nav-link" id="nav-plipidico-tab" data-toggle="tab" href="#nav-plipidico" role="tab" aria-controls="nav-plipidico" aria-selected="false">Perfil lipídico</a>
            <a class="nav-item nav-link" id="nav-pbioquimico-tab" data-toggle="tab" href="#nav-pbioquimico" role="tab" aria-controls="nav-pbioquimico" aria-selected="false">Perfil bioquímico</a>
            <a class="nav-item nav-link" id="nav-parterial-tab" data-toggle="tab" href="#nav-parterial" role="tab" aria-controls="nav-parterial" aria-selected="false">Presión arterial</a>
        </div>
    </nav>
    <div class="tab-content" id="nav-tabContent">
        <div class="tab-pane fade show active" id="nav-hemograma" role="tabpanel" aria-labelledby="nav-hemograma-tab">
            <!---->
            <div class="table-responsive">
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-12">
                            <table class="table-sm table-bordered">
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>Hematocrito</th>
                                        <th>Hemoglobina</th>
                                        <th>Rcto.Eritrocitos</th>
                                        <th>Rcto.Plaquetas</th>
                                        <th>Rcto.Leucocitos</th>
                                        <th>V.C.M</th>
                                        <th>H.C.M</th>
                                        <th>C.H.C.M</th>
                                        <th>R.D.W-C.V</th>
                                        <th>Serie Roja</th>
                                        <th>Serie Blanca</th>
                                        <th>Plaquetas</th>
                                    </tr>
                                </thead>
                                {% for valor in hemograma %}         
                                <tbody id="tabla_hemograma">
                                    <tr>
                                        <td>{{valor.fechas}}</td>
                                        <td>{{valor.hematocrito}}</td>
                                        <td>{{valor.hemoglobina}}</td>
                                        <td>{{valor.rcto_eritrocitos}}</td>
                                        <td>{{valor.rcto_plaquetas}}</td>
                                        <td>{{valor.rcto_leucocitos}}</td>
                                        <td>{{valor.v_c_m}}</td>
                                        <td>{{valor.h_c_m}}</td>
                                        <td>{{valor.c_h_c_m}}</td>
                                        <td>{{valor.r_d_w_c_v}}</td>
                                        <td>{{valor.serie_roja}}</td>
                                        <td>{{valor.serie_blanca}}</td>
                                        <td>{{valor.plaquetas}}</td>
                                    </tr>
                                    {% endfor %}    
                                </tbody>
                            </table>
                        </div>
                        <div class="col-lg-12">
                            <figure class="highcharts-figure">
                                <br>
                                <div id="container-hemograma"></div>
                            </figure>
                                                    </div>
                        <script type="application/javascript">
Highcharts.chart('container-hemograma', {
    chart: {
        type: 'column'
    },
    title: {
        text: 'Serie de tiempo hemograma'
    },
    subtitle: {
        text: 'Source: Clinica'
    },
    xAxis: {
        categories:{{ grafico.fechas|safe }},
        crosshair: true
    },
    yAxis: {
        min: 0,
        title: {
            text: ''
        }
    },
    tooltip: {
        headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
        pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
            '<td style="padding:0"><b>{point.y:.1f}</b></td></tr>',
        footerFormat: '</table>',
        shared: true,
        useHTML: true
    },
    plotOptions: {
        column: {
            pointPadding: 0.2,
            borderWidth: 0
        }
    },
    series: [{
        name: 'Hematocrito',
        data: {{ grafico.hematocrito|safe }}

    }, {
        name: 'Hemoglobina',
        data: {{ grafico.hemoglobina|safe }} 
    }, 
    {
        name: 'Rcto Eritrocitos',
        data: {{ grafico.rcto_eritrocitos|safe }}

    },
    {
        name: 'Rcto Leucocitos',
        data: {{ grafico.rcto_leucocitos|safe }}

    },
    {
        name: 'Rcto plaquetas',
        data: {{ grafico.rcto_plaquetas|safe }}

    },
    {
        name: 'V.C.M',
        data: {{ grafico.v_c_m|safe }}

    },
    {
        name: 'H.C.M',
        data: {{ grafico.h_c_m|safe }}

    },
    {
        name: 'C.H.C.M',
        data: {{ grafico.c_h_c_m|safe }}

    },
    {
        name: 'R.D.W-C.V',
        data: {{ grafico.r_d_w_c_v|safe }}

    },
    

]
});
                        </script>
                    </div>
                </div>
                <!---->
            </div>
        </div>
        <div class="tab-pane fade" id="nav-plipidico" role="tabpanel" aria-labelledby="nav-plipidico-tab">
            <!---->
            <div class="table-responsive">
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-12">
                            <table class="table-sm table-bordered">
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>Glicemia</th>
                                        <th>HDL Colesterol</th>
                                        <th>LDL Colesterol</th>
                                        <th>Colesterol Total</th>
                                        <th>Trigliceridos</th>
                                        <th>Colesterol Total HDL</th>
                                    </tr>
                                </thead>
                                {% for valor in perfil_lipidico %}         
                                <tbody id="tabla_plipidico">
                                    <tr>
                                        <td>{{valor.fecha}}</td>
                                        <td>{{valor.glicemia}}</td>
                                        <td>{{valor.hdl_colesterol}}</td>
                                        <td>{{valor.ldl_colesterol}}</td>
                                        <td>{{valor.colesterol_total}}</td>
                                        <td>{{valor.trigliceridos}}</td>
                                        <td>{{valor.colesterol_total_hdl}}</td>
                                    </tr>
                                    {% endfor %}    
                                </tbody>
                            </table>
                        </div>
                        <div class="col-lg-12">
                            <figure class="highcharts-figure">
                                <br>
                                <div id="container-plipidico"></div>
                            </figure>
                                                    </div>
                        <script type="application/javascript">
Highcharts.chart('container-plipidico', {
    chart: {
        type: 'column'
    },
    title: {
        text: 'Serie de tiempo perfil lipidico'
    },
    subtitle: {
        text: 'Source: Clinica'
    },
    xAxis: {
        categories:{{ grafico.fechas|safe }},
        crosshair: true
    },
    yAxis: {
        min: 0,
        title: {
            text: ''
        }
    },
    tooltip: {
        headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
        pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
            '<td style="padding:0"><b>{point.y:.1f}</b></td></tr>',
        footerFormat: '</table>',
        shared: true,
        useHTML: true
    },
    plotOptions: {
        column: {
            pointPadding: 0.2,
            borderWidth: 0
        }
    },
    series: [{
        name: 'Glicemia',
        data: {{ grafico.glicemia|safe }}

    }, {
        name: 'Hdl_colesterol',
        data: {{ grafico.hdl_colesterol|safe }} 
    }, 
    {
        name: 'Ldl_colesterol',
        data: {{ grafico.ldl_colesterol|safe }}

    },
    {
        name: 'Colesterol total',
        data: {{ grafico.colesterol_total|safe }}

    },
    {
        name: 'Trigliceridos',
        data: {{ grafico.trigliceridos|safe }}

    },
    {
        name: 'Colestero Total HDL',
        data: {{ grafico.colesterol_total_hdl|safe }}

    },
]
});
                        </script>
                    </div>
                </div>
                <!---->
            </div>
        </div>
        <!--PERFIL BIOQUIMICO-->
        <div class="tab-pane fade" id="nav-pbioquimico" role="tabpanel" aria-labelledby="nav-pbioquimico-tab">
            <!---->
            <div class="table-responsive">
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-6">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>PTD</th>
                                        <th>TBR</th>
                                    </tr>
                                </thead>
                                {% for elemento in perfil_bioquimico %}
                                {% for clave, valor in elemento.items %}                    
                                <tbody id="tabla_pbioquimico">
                                    <tr>
                                        <td>{{clave}}</td>
                                        <td>{{valor.PTD}}</td>
                                        <td>{{valor.TBR}}</td>
                                    </tr>
                                    {% endfor %}
                                    {% endfor %}    
                                </tbody>
                            </table>
                        </div>
                        <div class="col-lg-6">
                            <figure class="highcharts-figure">
                                <div id="container-pbioquimico"></div>
                            </figure>
                                                    </div>
                        <script type="application/javascript">
Highcharts.chart('container-pbioquimico', {
    chart: {
        type: 'column'
    },
    title: {
        text: 'Serie de tiempo perfil bioquímico'
    },
    subtitle: {
        text: 'Source: Clinica'
    },
    xAxis: {
        categories: {{pbioquimico_grafico.fechas|safe}},
        crosshair: true
    },
    yAxis: {
        min: 0,
        title: {
            text: 'Rainfall (mm)'
        }
    },
    tooltip: {
        headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
        pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
            '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
        footerFormat: '</table>',
        shared: true,
        useHTML: true
    },
    plotOptions: {
        column: {
            pointPadding: 0.2,
            borderWidth: 0
        }
    },
    series: [{
        name: 'PTD',
        data: {{ pbioquimico_grafico.PTD }}

    }, {
        name: 'TBR',
        data: {{ pbioquimico_grafico.TBR }}

    }]
});
                        </script>
                    </div>
                </div>
                <!---->
            </div>
        </div>
        <div class="tab-pane fade" id="nav-parterial" role="tabpanel" aria-labelledby="nav-parterial-tab">
            <!---->
            <div class="table-responsive">
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-6">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>Frecuencia mañana</th>
                                        <th>Frecuencia noche</th>
                                    </tr>
                                </thead>
                                {% for elemento in presion_arterial %}
                                {% for clave, valor in elemento.items %}                    
                                <tbody id="tabla_parterial">
                                    <tr>
                                        <td>{{clave}}</td>
                                        <td>{{valor.F_manana}}</td>
                                        <td>{{valor.F_tarde}}</td>
                                    </tr>
                                    {% endfor %}
                                    {% endfor %}    
                                </tbody>
                            </table>
                        </div>
                        <div class="col-lg-6">
                            <figure class="highcharts-figure">
                                <div id="container1"></div>
                            </figure>
                                                    </div>
                        <script type="application/javascript">
Highcharts.chart('container1', {
    chart: {
        type: 'column'
    },
    title: {
        text: 'Serie de tiempo presion arterial'
    },
    subtitle: {
        text: 'Source: Clinica'
    },
    xAxis: {
        categories: {{parterial_grafico.fechas|safe}},
        crosshair: true
    },
    yAxis: {
        min: 0,
        title: {
            text: 'Rainfall (mm)'
        }
    },
    tooltip: {
        headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
        pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
            '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
        footerFormat: '</table>',
        shared: true,
        useHTML: true
    },
    plotOptions: {
        column: {
            pointPadding: 0.2,
            borderWidth: 0
        }
    },
    series: [{
        name: 'Frecuencia mañana',
        data: {{ parterial_grafico.F_manana }}

    }, {
        name: 'Frecuencia noche',
        data: {{ parterial_grafico.F_tarde }}

    }]
});
                        </script>
                    </div>
                </div>
                <!---->
            </div>
        </div>
    </div>

{% endblock %}


{% block footer %} {{block.super}} {% endblock %}